<!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8" />
    <title>Nodejs - 手機網頁</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="author" content="Jerry Wang" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="socket.io/socket.io.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function() {

//            ==========================================================================================================================
            // 建立 Socket IO 連線
// ==========================================================================================================================

            var key = '';
            var socket = io.connect();
            socket.emit("send_from_phone", {
                key: "entry",
                act: "enter"
            });
            //
            socket.on('send_key', function(get) {
                if (key == '') {
                    key = get.key;
                    $("#text").append('\nID : ' + get.key);
                }
            });

            socket.on('run_phone', function(get) {
                if (key != get.key) {
                    $("body").css("background-color", 'white');
                }
                else if(key == get.key){
                    $("body").css("background-color", 'red');
                }

            });
//            clearTimeout(timer1);
//            clearTimeout(timer2);
            "undefined" != typeof console && console.log("user enter via mobile");
            // ==========================================================================================================================

            "undefined" != typeof console && console.log("enter mobile page");

            $("#change_btn").click(function() {
                "undefined" != typeof console && console.log("send change color command");
                socket.emit("send_from_phone", {
                    key: "change",
                    act: "changebg"
                });
            });

        });
    </script>
</head>

<body>

    <p>～連接成功～</p>
    <div id=text></div>
    <input id="change_btn" type="button" value="控制電腦端變背景色" />

</body>

</html>